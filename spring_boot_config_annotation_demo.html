<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot Config & Annotations</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 20px; }
        h1 { color: #6db33f; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { padding: 10px 20px; background: #ddd; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .tab.active { background: #6db33f; color: white; }
        
        .container { width: 100%; max-width: 1000px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); min-height: 500px; }
        
        /* Config Styles */
        .config-list { list-style: none; padding: 0; }
        .config-item { 
            padding: 10px; border-bottom: 1px solid #eee; display: flex; align-items: center; 
            transition: background 0.2s; cursor: default;
        }
        .config-item:hover { background: #f9f9f9; }
        .priority-badge { 
            background: #0078d4; color: white; width: 30px; height: 30px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;
        }
        .config-desc { color: #666; font-size: 0.9rem; margin-left: auto; }

        /* Annotation Styles */
        .anno-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .anno-card { 
            border: 1px solid #ddd; border-radius: 5px; padding: 15px; cursor: pointer; transition: all 0.2s;
            background: #fafafa;
        }
        .anno-card:hover { border-color: #6db33f; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .anno-name { font-family: monospace; font-weight: bold; color: #d63384; margin-bottom: 5px; }
        .anno-cat { font-size: 0.75rem; text-transform: uppercase; color: #999; letter-spacing: 1px; }
        
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);
            align-items: center; justify-content: center; z-index: 1000;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 8px; width: 500px; max-width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); position: relative;
        }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #999; }
        .modal-code { background: #2d2d2d; color: #ccc; padding: 15px; border-radius: 4px; font-family: monospace; margin-top: 15px; overflow-x: auto; }

    </style>
</head>
<body>
    <h1>Spring Boot Essentials</h1>
    
    <div class="tabs">
        <div class="tab active" onclick="switchTab('config')">Configuration Priority</div>
        <div class="tab" onclick="switchTab('anno')">Common Annotations</div>
    </div>

    <div id="config-view" class="container">
        <h2>Externalized Configuration Order</h2>
        <p>Spring Boot properties are overridden in the following order (Highest Priority first):</p>
        <ul class="config-list">
            <li class="config-item">
                <div class="priority-badge">1</div>
                <div><strong>Devtools global settings</strong></div>
                <div class="config-desc">~/.spring-boot-devtools.properties</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">2</div>
                <div><strong>@TestPropertySource</strong></div>
                <div class="config-desc">On test classes</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">3</div>
                <div><strong>Command line arguments</strong></div>
                <div class="config-desc">--server.port=9000</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">4</div>
                <div><strong>SPRING_APPLICATION_JSON</strong></div>
                <div class="config-desc">Inline JSON in env var</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">5</div>
                <div><strong>Java System properties</strong></div>
                <div class="config-desc">System.getProperties()</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">6</div>
                <div><strong>OS environment variables</strong></div>
                <div class="config-desc">System.getenv()</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">7</div>
                <div><strong>Profile-specific Config</strong></div>
                <div class="config-desc">application-{profile}.properties/yaml</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">8</div>
                <div><strong>Application Config</strong></div>
                <div class="config-desc">application.properties/yaml</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">9</div>
                <div><strong>@PropertySource</strong></div>
                <div class="config-desc">On @Configuration classes</div>
            </li>
            <li class="config-item">
                <div class="priority-badge">10</div>
                <div><strong>Default properties</strong></div>
                <div class="config-desc">SpringApplication.setDefaultProperties</div>
            </li>
        </ul>
    </div>

    <div id="anno-view" class="container" style="display: none;">
        <h2>Annotation Cheat Sheet</h2>
        <p>Click on an annotation to see usage details.</p>
        <div class="anno-grid" id="anno-grid">
            <!-- Generated by JS -->
        </div>
    </div>

    <div id="modal" class="modal" onclick="closeModal(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal(event)">&times;</span>
            <h2 id="m-title" style="color: #d63384; font-family: monospace;">@Annotation</h2>
            <p id="m-desc">Description goes here.</p>
            <div class="modal-code" id="m-code">Code example</div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById('config-view').style.display = tab === 'config' ? 'block' : 'none';
            document.getElementById('anno-view').style.display = tab === 'anno' ? 'block' : 'none';
        }

        const annotations = [
            { name: '@SpringBootApplication', cat: 'Boot', desc: '<b>The Entry Point.</b><br>Meta-annotation that combines:<br>1. <code>@Configuration</code>: Allows Java-based config.<br>2. <code>@EnableAutoConfiguration</code>: Enables Boot\'s magic auto-configuration.<br>3. <code>@ComponentScan</code>: Scans for components in the current package and sub-packages.', code: '@SpringBootApplication\npublic class MyApp {\n  public static void main(String[] args) {\n    SpringApplication.run(MyApp.class, args);\n  }\n}' },
            
            // Stereotypes
            { name: '@Component', cat: 'Stereotype', desc: '<b>General Managed Bean.</b><br>Marks a class as a Spring-managed component. It is the parent of @Service, @Repository, and @Controller. Use this when no other specific stereotype applies (e.g., a utility class).', code: '@Component\npublic class EmailSender {\n  public void send() { ... }\n}' },
            { name: '@Service', cat: 'Stereotype', desc: '<b>Business Logic Layer.</b><br>Specialization of @Component. Semantically indicates that the class holds business logic. Currently, it behaves exactly like @Component, but future Spring versions may add specific behavior.', code: '@Service\npublic class UserService {\n  public User register(UserDto dto) { ... }\n}' },
            { name: '@Repository', cat: 'Stereotype', desc: '<b>Data Access Layer.</b><br>Specialization of @Component. Indicates a DAO (Data Access Object).<br><b>Key Feature:</b> Automatically translates database-specific checked exceptions (like SQLException) into Spring\'s unchecked <code>DataAccessException</code> hierarchy.', code: '@Repository\npublic class UserRepository {\n  public User findById(Long id) { ... }\n}' },
            { name: '@Controller', cat: 'Web', desc: '<b>MVC Controller.</b><br>Marks a class as a Web Controller. Methods usually return a String (view name) to be resolved by a ViewResolver (e.g., JSP, Thymeleaf).', code: '@Controller\npublic class HomeController {\n  @GetMapping("/")\n  public String home() {\n    return "index"; // returns index.html\n  }\n}' },
            { name: '@RestController', cat: 'Web', desc: '<b>REST API Controller.</b><br>Combines <code>@Controller</code> and <code>@ResponseBody</code>.<br>Methods return data (JSON/XML) directly to the HTTP response body, not a view name.', code: '@RestController\npublic class ApiController {\n  @GetMapping("/api/users")\n  public List<User> users() { ... }\n}' },
            
            // DI & Config
            { name: '@Autowired', cat: 'DI', desc: '<b>Dependency Injection.</b><br>Tells Spring to inject a bean here. Can be used on:<br>1. <b>Constructor</b> (Recommended, allows immutability).<br>2. <b>Field</b> (Easy, but hard to test).<br>3. <b>Setter</b> (Optional dependencies).', code: '@Service\npublic class UserService {\n  private final UserRepository repo;\n\n  @Autowired // Optional in Spring 4.3+ if 1 constructor\n  public UserService(UserRepository repo) {\n    this.repo = repo;\n  }\n}' },
            { name: '@Qualifier', cat: 'DI', desc: '<b>Disambiguation.</b><br>Used with @Autowired when multiple beans of the same type exist. Specifies the bean name to inject.', code: '@Autowired\n@Qualifier("paymentServiceStripe")\nprivate PaymentService paymentService;' },
            { name: '@Configuration', cat: 'Config', desc: '<b>Java Configuration Class.</b><br>Indicates that a class declares one or more <code>@Bean</code> methods. These classes are processed by the Spring container to generate bean definitions and service requests for those beans at runtime.', code: '@Configuration\npublic class AppConfig {\n  @Bean\n  public MyBean myBean() { return new MyBean(); }\n}' },
            { name: '@Bean', cat: 'Config', desc: '<b>Bean Declaration.</b><br>Method-level annotation. Tells Spring that this method returns an object that should be registered as a bean in the application context. The method name becomes the bean name.', code: '@Bean\npublic RestTemplate restTemplate() {\n  return new RestTemplate();\n}' },
            { name: '@Value', cat: 'Config', desc: '<b>Property Injection.</b><br>Injects values from <code>application.properties</code> or environment variables into fields.', code: '@Value("${server.port}")\nprivate int port;\n\n@Value("${app.name:DefaultName}")\nprivate String appName;' },
            { name: '@ConfigurationProperties', cat: 'Config', desc: '<b>Type-safe Configuration.</b><br>Binds a group of properties (e.g., <code>mail.host</code>, <code>mail.port</code>) to a POJO. Requires <code>@EnableConfigurationProperties</code> or <code>@Component</code>.', code: '@Component\n@ConfigurationProperties(prefix = "mail")\npublic class MailProps {\n  private String host;\n  private int port;\n  // getters/setters\n}' },
            { name: '@Scope', cat: 'Config', desc: '<b>Bean Scope.</b><br>Defines the lifecycle of a bean. Common values: <code>singleton</code> (default), <code>prototype</code> (new instance per request), <code>request</code>, <code>session</code>.', code: '@Bean\n@Scope("prototype")\npublic MyBean myBean() { ... }' },
            
            // Web
            { name: '@RequestMapping', cat: 'Web', desc: '<b>URL Mapping.</b><br>Maps HTTP requests to handler methods. Can be used at class level (base path) or method level. Variants: @GetMapping, @PostMapping, etc.', code: '@RequestMapping("/api/v1")\npublic class ApiController { ... }' },
            { name: '@PathVariable', cat: 'Web', desc: '<b>URL Path Variable.</b><br>Extracts values from the URI path template variables.', code: '@GetMapping("/users/{id}")\npublic User getUser(@PathVariable("id") Long id) { ... }' },
            { name: '@RequestParam', cat: 'Web', desc: '<b>Query Parameter.</b><br>Extracts query parameters from the URL (e.g., <code>?name=john</code>). Can be optional or required.', code: '@GetMapping("/search")\npublic List<User> search(@RequestParam("q") String query,\n                         @RequestParam(defaultValue = "1") int page) { ... }' },
            { name: '@RequestBody', cat: 'Web', desc: '<b>Request Body.</b><br>Maps the HTTP request body (JSON/XML) to a Java object. Uses HttpMessageConverters (like Jackson) for deserialization.', code: '@PostMapping("/users")\npublic void save(@RequestBody UserDto user) { ... }' },
            { name: '@ResponseBody', cat: 'Web', desc: '<b>Response Body.</b><br>Indicates that the return value should be written directly to the HTTP response body (serialized to JSON), rather than resolving to a view.', code: '@GetMapping("/ping")\n@ResponseBody\npublic String ping() { return "pong"; }' },
            
            // JPA / Data
            { name: '@Entity', cat: 'JPA', desc: '<b>JPA Entity.</b><br>Marks a class as a JPA Entity, meaning it is mapped to a database table.', code: '@Entity\npublic class User {\n  @Id\n  private Long id;\n}' },
            { name: '@Table', cat: 'JPA', desc: '<b>Table Mapping.</b><br>Specifies the table name for the entity. If omitted, the class name is used.', code: '@Entity\n@Table(name = "t_users")\npublic class User { ... }' },
            { name: '@Id', cat: 'JPA', desc: '<b>Primary Key.</b><br>Marks the field as the primary key of the entity.', code: '@Id\nprivate Long id;' },
            { name: '@GeneratedValue', cat: 'JPA', desc: '<b>ID Generation Strategy.</b><br>Configures how the primary key is generated (AUTO, IDENTITY, SEQUENCE, TABLE).', code: '@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;' },
            { name: '@Transactional', cat: 'Data', desc: '<b>Transaction Management.</b><br>Wraps the method execution in a database transaction. If an unchecked exception occurs, it rolls back. Supports propagation and isolation levels.', code: '@Transactional(rollbackFor = Exception.class)\npublic void transferMoney() { ... }' },
            
            // Lifecycle
            { name: '@PostConstruct', cat: 'Lifecycle', desc: '<b>Post-Initialization.</b><br>Executed after the bean has been constructed and dependencies injected. Useful for initialization logic.', code: '@PostConstruct\npublic void init() {\n  System.out.println("Bean is ready!");\n}' },
            { name: '@PreDestroy', cat: 'Lifecycle', desc: '<b>Pre-Destruction.</b><br>Executed before the bean is removed from the context. Useful for cleanup (closing connections, etc.).', code: '@PreDestroy\npublic void cleanup() {\n  System.out.println("Bean is closing...");\n}' }
        ];

        function initAnno() {
            const grid = document.getElementById('anno-grid');
            annotations.forEach(a => {
                const card = document.createElement('div');
                card.className = 'anno-card';
                card.innerHTML = `
                    <div class="anno-name">${a.name}</div>
                    <div class="anno-cat">${a.cat}</div>
                `;
                card.onclick = () => showModal(a);
                grid.appendChild(card);
            });
        }

        function showModal(a) {
            document.getElementById('m-title').innerText = a.name;
            document.getElementById('m-desc').innerText = a.desc;
            document.getElementById('m-code').innerText = a.code;
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal(e) {
            if (e.target === document.getElementById('modal') || e.target.classList.contains('close-btn')) {
                document.getElementById('modal').style.display = 'none';
            }
        }

        initAnno();

    </script>
</body>
</html>